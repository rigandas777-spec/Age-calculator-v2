<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Age Calculator</title>
<style>
:root{--bg1:#141e30; --bg2:#292c38; --gold:#ffd700; --glass:rgba(255,255,255,0.08);}
html,body{height:100%; margin:0; font-family:'Segoe UI',sans-serif;}
body{background: linear-gradient(135deg,var(--bg1),var(--bg2)); color:#fff; display:flex; align-items:center; justify-content:center; padding:20px;}
.container{max-width:435px; width:100%; background:var(--glass); padding:30px 18px 22px 18px; border-radius:18px; box-shadow:0 10px 30px rgba(0,0,0,0.45); text-align:center; position:relative;}
h1{margin:4px 0 18px 0; font-size:28px; color:var(--gold);}
.hint{margin-bottom:9px; color:#ffe066;}
.row{display:flex;align-items:center;justify-content:center;margin-bottom:15px;gap:8px;}
.calendar-wrap{position:relative;display:inline-block;}
.input-date{ width:120px; padding:10px; border-radius:10px; border:none; background:rgba(255,255,255,0.09); color:#fff; font-size:16px; text-align:center;}
input[type="date"].calendar-proxy{
  opacity:0; position:absolute; left:0;top:0;width:100%;height:100%;border:none;cursor:pointer;z-index:10;
}
.calendar-btn{background:rgba(0,0,0,0.07);padding:10px 12px;border-radius:10px;border:none;color:var(--gold);font-size:18px;cursor:pointer;position:relative;z-index:1;}
.present-date-label{color:#ffd700;font-weight:600;margin-right:7px;}
button.calc, .extra-btn, .planet-btn, #backBtn, #backLifeBtn, #backPlanetBtn {
  width:100%; padding:12px; border-radius:10px; font-size:16px; font-weight:600; border:none; cursor:pointer;
  margin-bottom:10px; transition:background .13s;
}
button.calc {background:linear-gradient(90deg,var(--gold),#ffcc33); color:#000;}
.extra-btn, .planet-btn {background: linear-gradient(90deg, #ffd700, #ffcc33); color: #000; margin-bottom: 10px;}
#backBtn, #backLifeBtn, #backPlanetBtn {background:linear-gradient(90deg,#222,#333); color:var(--gold); display:none; margin-bottom:18px;}
.age-big-box {display:flex; gap:18px; justify-content:center; background:rgba(30,30,30,0.98); padding:18px 0 14px 0; border-radius:14px; box-shadow:0 3px 18px rgba(30,30,10,.13);width:100%;margin-bottom:14px;}
.ageval-col{flex:1;}
.ageval-num{font-size:36px; color:var(--gold); font-weight:900;}
.ageval-label{font-size:15px; font-weight:600; color:#ffe066; margin-top:2px; letter-spacing:.06em;}
.next-birt-box{background:rgba(38,38,26,0.98); border-radius:12px; padding:12px 8px 9px 8px; margin:0 0 14px 0;text-align:center; font-size:18px;}
.next-birthday-title{color:#ffd700; font-weight:bold; font-size:16px;}
.next-bday-row{margin-top:5px; font-size:19px;}
.next-day-label{color:#ffe066; font-size: 15px;}
.birthday-countdown-box{padding:18px 0 10px 0;background:rgba(30,30,20,.93);border-radius:14px; display:flex;justify-content:center;gap:35px;align-items:center; margin:0 0 18px 0; font-weight:bold; letter-spacing:2px; box-shadow:0 2px 8px #0001;}
.countdown-val{ font-size:26px; color:var(--gold); min-width:40px;transition:.13s;}
.countdown-unit {font-size:13px;color:#ffe066;}
.you-lived-box {background: rgba(255,255,255,0.10);border-radius:14px; padding:18px 10px 12px 10px; margin:0 0 16px 0;text-align:center; box-shadow:0 2px 16px rgba(0,0,0,.18);}
.you-lived-title {color:#fff; font-size:18px; font-weight:700; margin-bottom:10px; letter-spacing:.5px; text-shadow:0 1px 4px #1119;}
.youlived-grid {display:grid; grid-template-columns:repeat(2,1fr); gap:8px; font-size:16px;}
.youlived-label {color:#ffd700; font-weight:600;}
.youlived-val {font-size:18px; font-weight:700;}
.life-btm-btns{margin-top:15px;}
#lifeStatisticsPage, #planetsPage {display:none; width:100%; animation: fadeIn .5s;}
.statistics-header, #planetsHeader {color: #ffd700; font-size: 23px; font-weight: bold; margin-bottom: 18px; letter-spacing: 1px; margin-top: 5px;}
.stats-grid24, #planetsGrid {display:grid; grid-template-columns:1fr 1fr; gap:27px 16px; margin:0 0 18px 0;}
.stats-cell, .planet-cell {background:rgba(40,30,10,0.97); box-shadow:0 2px 11px #241a09a0; border-radius:13px; padding:18px 10px 16px 10px; display:flex; flex-direction:column;align-items:center; min-height:90px; min-width:120px;}
.stat-emoji, .planet-emoji {font-size:28px;filter: drop-shadow(0 1px 2px #000b);margin-bottom:6px;}
.stats-label, .planet-label {color:#ffd700; font-weight:600; font-size:15px; margin-bottom:3px; text-align:center;}
.stats-val, .planet-val {color:#fff; font-weight:bold; font-size:22px; margin-bottom:5px; margin-top:2px; letter-spacing:1px; text-shadow:0 1px 4px #1118;}
.stats-reason, .planet-reason {font-size:13px; color:#ffe066; opacity:.90; margin-top:5px; text-align:center;}
.lifestat-progressbox{background:rgba(38,38,26,0.97); box-shadow:0 2px 11px #241a09a0; border-radius:13px; padding:17px 10px 13px 10px; margin-bottom:16px;}
.life-progress-title{font-weight:700; color:#ffd700;font-size:18px;margin-bottom:6px;}
.life-progress-bignum{font-size:38px;font-weight:bold;color:#ffd700; margin-bottom:2px;}
.life-progress-desc{color:#ffe066;font-size:15px;}
.lifestat-daybox{background:rgba(38,38,26,0.93);border-radius:13px;margin-bottom:16px;padding:12px 9px 9px 9px;}
.life-day-title{font-weight:700; color:#ffd700;font-size:17px;margin-bottom:4px;}
.life-day-desc{color:#ffe066;font-size:15px;}
@media (max-width:500px){
  .container{padding:9px 1vw;}
  .stats-cell, .planet-cell{min-width:95px;padding:13px 2px 9px 2px;}
  .stats-grid24, #planetsGrid{gap:16px 6px;}
}
@keyframes fadeIn{ from{opacity:0; transform:translateY(-6px)} to{opacity:1; transform:none} }
@media (max-width:500px){
  .container{padding:10px 3vw; max-width:99vw;}
  .stats-cell, .planet-cell{min-width:95px; padding:13px 2px 9px 2px;}
  .stats-grid24, #planetsGrid{gap:16px 6px;}
}
@media (max-width:400px){
  h1{font-size:20px;}
  .container{padding:6px 1vw;}
  .age-big-box{flex-direction:column; gap:10px;}
  .youlived-grid, .stats-grid24, #planetsGrid{grid-template-columns:1fr;}
  .stats-cell, .planet-cell{min-width:1px; padding:10px 2px;}
  button, .calc, .extra-btn, .planet-btn, #backBtn, #backLifeBtn, #backPlanetBtn {font-size:14px;}
}
html,body{height:auto; min-height:100%;}
body{overflow-x:hidden; overflow-y:auto;}

  .great-things-premium-card {
  max-width: 420px;
  margin: 38px auto 30px auto;
  background: linear-gradient(122deg,#24243e 68%, #ffd70025 100%);
  border-radius: 21px;
  box-shadow: 0 7px 32px #18183b55, 0 1.5px 8px #ffd70035;
  padding: 29px 21px 20px 21px;
  color: #fff;
  text-align: center;
  position: relative;
  overflow: hidden;
}

/* Back button as icon at TOP LEFT */
.great-things-premium-back {
  position: absolute;
  top: 12px;
  left: 12px;
  background: linear-gradient(90deg,#222,#ffd70030);
  color: #ffd700;
  border: none;
  border-radius: 100px;
  width: 39px; height: 39px;
  font-size: 1.34em;
  font-weight: 700;
  cursor: pointer;
  z-index: 2;
  box-shadow: 0 2px 8px #0002;
  transition: background .13s, color .12s;
  display: flex;
  align-items: center;
  justify-content: center;
}
.great-things-premium-back:hover {
  background: linear-gradient(90deg,#26277a,#ffd70070 90%);
  color: #fff;
}

/* Panel title */
.great-things-premium-title {
  font-size: 2em;
  color: #ffd700;
  font-weight: 900;
  margin-bottom: 21px;
  letter-spacing: 1px;
  text-shadow: 0 3px 12px #0009;
  margin-top: 7px;
}

/* List appearance */
.great-things-premium-list {
  margin: 0 auto 0 auto;
  padding-left: 0;
  list-style: none;
  max-width: 97%;
}
.great-things-premium-list li {
  background: rgba(255,215,0,0.11);
  box-shadow: 0 2px 12px #ffd6000c;
  color: #fffce9;
  border-radius: 9px;
  margin-bottom: 15px;
  padding: 14px 16px 13px 13px;
  font-size: 1.1em;
  font-weight: 530;
  display: flex;
  align-items: center;
  gap: 10px;
  border-left: 5px solid #ffd700e3;
}
.great-things-premium-list li::before {
  content: "‚ú®";
  color: #ffd700;
  font-size: 1.22em;
  margin-right: 8px;
  flex-shrink: 0;
  line-height: 1;
}

</style>
</head>
<body>
<div class="container" id="app">
  <div id="inputArea">
    <h1>Age Calculator</h1>
    <div class="row">
      <span class="present-date-label">Present Date:</span>
      <input type="text" inputmode="numeric" class="input-date" id="presentDateInput" maxlength="10" placeholder="DD/MM/YYYY" autocomplete="off" />
      <span class="calendar-wrap">
        <button type="button" class="calendar-btn" tabindex="-1">üìÖ</button>
        <input type="date" class="calendar-proxy" id="presentDatePicker">
      </span>
    </div>
    <div class="row">
      <input type="text" inputmode="numeric" class="input-date" id="dobInput" maxlength="10" placeholder="DD/MM/YYYY" autocomplete="off" />
      <span class="calendar-wrap">
        <button type="button" class="calendar-btn" tabindex="-1">üìÖ</button>
        <input type="date" class="calendar-proxy" id="dobPicker">
      </span>
    </div>
    <button class="calc" id="calcBtn">Calculate Age</button>
    <div class="hint">(Type your DOB or use calendar)</div>
    <div class="hint" id="typeHint" style="color:#FFD0D0;"></div>
  </div>
  <button id="backBtn">‚Üê Back</button>
  <div id="resultPage" style="display:none;">
    <div class="age-big-box" id="ageBigBox">
      <div class="ageval-col"><div class="ageval-num" id="ageYears">0</div><div class="ageval-label">Years</div></div>
      <div class="ageval-col"><div class="ageval-num" id="ageMonths">0</div><div class="ageval-label">Months</div></div>
      <div class="ageval-col"><div class="ageval-num" id="ageDays">0</div><div class="ageval-label">Days</div></div>
    </div>
    <div class="next-birt-box">
      <div class="next-birthday-title">NEXT BIRTHDAY</div>
      <div class="next-bday-row"><span id="nextBdayDate"></span></div>
      <div class="next-day-label" id="nextBdayWeekday"></div>
    </div>
    <div class="birthday-countdown-box" id="birthdayCountdownBox">
      <div><div class="countdown-val" id="cdDays">00</div><div class="countdown-unit">DAYS</div></div>
      <div><div class="countdown-val" id="cdHours">00</div><div class="countdown-unit">HOURS</div></div>
      <div><div class="countdown-val" id="cdMins">00</div><div class="countdown-unit">MINUTES</div></div>
      <div><div class="countdown-val" id="cdSecs">00</div><div class="countdown-unit">SECONDS</div></div>
    </div>
    <div class="you-lived-box" style="margin-bottom:18px;">
      <div class="you-lived-title">YOU ALREADY LIVED</div>
      <div class="youlived-grid" id="youLivedGrid"></div>
    </div>
    <div class="life-btm-btns">
      <button class="extra-btn" id="lifeStatsBtn2">Show Life Statistics</button>
      <button class="extra-btn" id="greatThingsBtn">‚ú® Great Things in My Birth Year</button>
      <button class="planet-btn" id="planetBtn">üåç Age On Different Planets</button>
    </div>
  </div>
  <div id="lifeStatisticsPage">
    <button id="backLifeBtn">‚Üê Back</button>
    <!-- New: Life Progress -->
    <div class="lifestat-progressbox" id="lifeProgressBox">
      <div class="life-progress-title">Life progress</div>
      <div class="life-progress-bignum" id="lifeProgressPercent">0%</div>
      <div class="life-progress-desc" id="lifeProgressDesc"></div>
    </div>
    <!-- New: Day of Life -->
    <div class="lifestat-daybox" id="dayOfLifeBox">
      <div class="life-day-title">A day of life</div>
      <div class="life-day-desc" id="lifeDayDesc"></div>
    </div>
    <div class="statistics-header">Your Life Statistics</div>
    <div class="stats-grid24" id="lifeStatsGrid"></div>
  </div>
  <div id="planetsPage">
    <button id="backPlanetBtn">‚Üê Back</button>
    <div id="planetsHeader">Your Age On Different Planets</div>
    <div id="planetsGrid"></div>
    </div>
    <!-- Premium Great Things page: put after planetsPage, at the bottom -->
<div id="greatThingsPage" style="display:none;">
  <div class="great-things-premium-card">
    <!-- Back button at TOP LEFT -->
    <button class="great-things-premium-back" id="backGreatThingsBtn" aria-label="Back">
      ‚Üê
    </button>
    <div class="great-things-premium-title">
      ‚ú® Great Things in <span id="great-things-year"></span> ‚ú®
    </div>
    <ul id="great-things-list" class="great-things-premium-list"></ul>
  </div>
</div>
<script>
function pad(n) {return n<10?'0'+n:n;}
const el=id=>document.getElementById(id);
let calcBirth = null, calcPresentDate = null;
let liveCountdownInterval = null;
let youLivedInterval = null;
const AVG_LIFE_EXPECTANCY = 73; // years; edit to your country if desired
window.addEventListener('DOMContentLoaded', function(){
  let today = new Date();
  el('presentDateInput').value = formatDate(today);
  el('presentDatePicker').value = today.toISOString().slice(0,10);
});
function formatTypedDate(val) {
  val = val.replace(/[^0-9]/g,"");
  if(val.length > 8) val = val.slice(0,8);
  let out = "";
  if(val.length > 0) out += val.slice(0,2);
  if(val.length >= 3) out += "/" + val.slice(2,4);
  else if(val.length > 2) out += "/" + val.slice(2);
  if(val.length > 4) out += "/" + val.slice(4);
  return out;
}
['presentDateInput','dobInput'].forEach(function(id){
  el(id).addEventListener('input', function(){
    let pos = this.selectionStart;
    let oldVal = this.value;
    let formatted = formatTypedDate(oldVal);
    this.value = formatted;
    if(pos === oldVal.length) {
      if(formatted.length === 2 || formatted.length === 5) this.selectionStart = this.selectionEnd = formatted.length+1;
      else this.selectionStart = this.selectionEnd = formatted.length;
    }
    let field = (id==='presentDateInput') ? el('presentDatePicker') : el('dobPicker');
    let dt=parseTypedDate(formatted);
    if(dt) field.value = dt.toISOString().slice(0,10);
  });
});
el('presentDatePicker').addEventListener('input',function(){
  let dt=new Date(this.value);
  if(dt && !isNaN(dt)) el('presentDateInput').value = formatDate(dt);
});
el('dobPicker').addEventListener('input',function(){
  let dt=new Date(this.value);
  if(dt && !isNaN(dt)) el('dobInput').value = formatDate(dt);
});
function formatDate(date) { return pad(date.getDate())+'/'+pad(date.getMonth()+1)+'/'+date.getFullYear();}
function parseTypedDate(str){
  if(!str) return null;
  let [d,m,y]=str.split('/');
  if(!d||!m||!y) return null;
  let date = new Date(Number(y), Number(m)-1, Number(d));
  if(date && date.getDate()==Number(d) && date.getMonth()==(Number(m)-1) && date.getFullYear()==Number(y)) return date;
  return null;
}
function showInputView() {
  el('inputArea').style.display = 'block';
  el('resultPage').style.display = 'none';
  el('backBtn').style.display = 'none';
  el('lifeStatisticsPage').style.display = 'none';
  el('planetsPage').style.display = 'none';
  el('typeHint').textContent = '';
  clearIntervals();
  navShow('inputArea');
}
function showResultView() {
  el('inputArea').style.display = 'none';
  el('resultPage').style.display = 'block';
  el('backBtn').style.display = 'block';
  el('lifeStatisticsPage').style.display = 'none';
  el('planetsPage').style.display = 'none';
  clearIntervals();
  navShow('resultPage');
}
function clearIntervals(){
  if(liveCountdownInterval) clearInterval(liveCountdownInterval);
  if(youLivedInterval) clearInterval(youLivedInterval);
  liveCountdownInterval = null; youLivedInterval = null;
}
el('backBtn').onclick = showInputView;
el('backLifeBtn').onclick = function(){
  history.back();
};
el('backPlanetBtn').onclick = function(){
  history.back();
};
el('calcBtn').onclick = function() {
  let present = parseTypedDate(el('presentDateInput').value);
  let birth = parseTypedDate(el('dobInput').value);
  if(!present) {el('typeHint').textContent = "Please enter correct present date.";return;}
  if(!birth) {el('typeHint').textContent = "Please enter correct date of birth.";return;}
  if(birth>present){el('typeHint').textContent="Date of birth can't be after present date!";return;}
  el('typeHint').textContent="";
  calcPresentDate = present; calcBirth = birth;
  buildResultPage(calcBirth, calcPresentDate);
  showResultView();
};
document.querySelectorAll('.calendar-wrap').forEach(function(calwrap){
  let btn = calwrap.querySelector('button.calendar-btn');
  let picker = calwrap.querySelector('input[type="date"].calendar-proxy');
  btn.addEventListener('click',function(){ picker.focus(); picker.click(); });
});
function buildResultPage(birth, currentDay) {
  clearIntervals();
  let years = currentDay.getFullYear() - birth.getFullYear();
  let months = currentDay.getMonth() - birth.getMonth();
  let days = currentDay.getDate() - birth.getDate();
  if (days < 0) {months--; days += new Date(currentDay.getFullYear(), currentDay.getMonth(), 0).getDate();}
  if (months < 0) {years--; months += 12;}
  el('ageYears').textContent = years;
  el('ageMonths').textContent = months;
  el('ageDays').textContent = days;
  const monthsArr = ["January","February","March","April","May","June","July","August","September","October","November","December"];
  let nextB = new Date(currentDay.getFullYear(), birth.getMonth(), birth.getDate());
  if(nextB < currentDay) nextB.setFullYear(currentDay.getFullYear() + 1);
  el('nextBdayDate').textContent = pad(nextB.getDate()) + " " + monthsArr[nextB.getMonth()] + " " + nextB.getFullYear();
  const daysArr = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];
  el('nextBdayWeekday').textContent = daysArr[nextB.getDay()];
  function renderCountdown(delta) {
    let d = Math.floor(delta/(1000*60*60*24));
    let h = Math.floor((delta/(1000*60*60))%24);
    let m = Math.floor((delta/(1000*60))%60);
    let s = Math.floor((delta/1000)%60);
    el('cdDays').textContent = pad(d>=0?d:0);
    el('cdHours').textContent = pad(h>=0?h:0);
    el('cdMins').textContent = pad(m>=0?m:0);
    el('cdSecs').textContent = pad(s>=0?s:0);
  }
  function liveCountdownLoop(){
    let now = new Date();
    let realtimeNextB = new Date(nextB.getTime());
    if(realtimeNextB < now) realtimeNextB.setFullYear(realtimeNextB.getFullYear()+1);
    let delta = realtimeNextB-now;
    renderCountdown(delta);
  }
  liveCountdownLoop();
  liveCountdownInterval = setInterval(liveCountdownLoop, 100);
  function livedUnits(){
    let diff = currentDay-birth;
    let ly = currentDay.getFullYear()-birth.getFullYear();
    let lm = ly*12 + currentDay.getMonth()-birth.getMonth();
    let lw = Math.floor(diff/(1000*60*60*24*7));
    let ld = Math.floor(diff/(1000*60*60*24));
    let lh = Math.floor(diff/(1000*60*60));
    let lmin = Math.floor(diff/(1000*60));
    let ls = Math.floor(diff/1000);
    el('youLivedGrid').innerHTML=`
      <div class="youlived-label">Years</div> <div class="youlived-val">${ly}</div>
      <div class="youlived-label">Months</div> <div class="youlived-val">${lm}</div>
      <div class="youlived-label">Weeks</div> <div class="youlived-val">${lw}</div>
      <div class="youlived-label">Days</div> <div class="youlived-val">${ld}</div>
      <div class="youlived-label">Hours</div> <div class="youlived-val">${lh}</div>
      <div class="youlived-label">Minutes</div> <div class="youlived-val">${lmin}</div>
      <div class="youlived-label">Seconds</div> <div class="youlived-val" id="youLivedSecs">${ls}</div>
    `;
  }
  livedUnits();
  youLivedInterval = setInterval(()=>{
    let diff = currentDay - birth;
    el('youLivedSecs').textContent = Math.floor(diff/1000);
  },1000);
}
// Life stats: now with üèÖ (medal) for "Total Years Lived"
const emojiList=[
  "üéÇ","üìÖ","üìÜ","üóìÔ∏è","üèÖ","üî¢","‚è∞","‚åõ","‚è≥","‚ù§Ô∏è","üòÑ","üò¥","üö∂","ü¶∂",
  "üåÖ","üíß","üìö","üìû","üß†","üì∏"
];
const statLabels=[
  "Current Age (years)",
  "Current Age (days)",
  "Total Weeks Lived",
  "Total Months Lived",
  "Total Years Lived",
  "Total Days (incl. leap days)",
  "Total Hours Lived",
  "Total Minutes Lived",
  "Total Seconds Lived",
  "Heartbeats (est.)",
  "Smiles (est.)",
  "Hours Slept (avg 8/day)",
  "Steps Walked (avg 5k/day)",
  "Kilometers Walked (est.)",
  "Sunrises Seen",
  "Litres of Water Drunk (est.)",
  "Books Read (est.)",
  "Phone Calls Made (est.)",
  "Decisions Made (est.)",
  "Photographs Taken (est.)"
];
const statReasons=[
  "From your date of birth to present date",
  "Calculated including leap years",
  "7 days/week √ó weeks since birth",
  "12 months/year √ó years since birth",
  "Full years completed since birth",
  "Includes extra leap days",
  "24 hours/day since birth",
  "60 minutes/hour √ó hours lived",
  "60 seconds/min √ó minutes lived",
  "Avg 75 bpm √ó seconds lived",
  "Estimated: 20 smiles/day",
  "Avg 8 hours sleep per day",
  "Avg 5000 steps walked per day",
  "Avg step ‚âà 0.8m (5000 steps/day)",
  "One for every day lived",
  "Assumed ~2.5L water/day",
  "Avg 9 books read per year",
  "Avg 1.8 calls per day",
  "Estimated 300 decisions each day",
  "Avg person snaps 146 photos/year"
];
function calculateLifeStats(birth,presentDay){
  const now=presentDay;
  const ageY=now.getFullYear()-birth.getFullYear()-(now.getMonth()<birth.getMonth()||(now.getMonth()===birth.getMonth()&&now.getDate()<birth.getDate()));
  const ageD=Math.floor((now-birth)/(1000*60*60*24));
  const weeks=Math.floor(ageD/7);
  const months=(now.getFullYear()-birth.getFullYear())*12+(now.getMonth()-birth.getMonth());
  const years=ageY;
  const totalDaysInclLeap=ageD;
  const hours=ageD*24;
  const minutes=hours*60;
  const seconds=minutes*60;
  const heartbeats=Math.floor(seconds/0.8);
  const smiles=ageD*20;
  const hoursSlept=ageD*8;
  const steps=ageD*5000;
  const kmWalked=Math.floor(steps*0.8/1000);
  const sunrises=ageD;
  const litresWater=Math.floor(ageD*2.5);
  const books=Math.round(years*9+months/12*9);
  const phoneCalls=Math.round(ageD*1.8);
  const decisions=Math.round(ageD*300);
  const photos=Math.round(years*146);
  return[
    years,ageD,weeks,months,years,totalDaysInclLeap,hours,minutes,seconds,heartbeats,smiles,hoursSlept,steps,kmWalked,
    sunrises,litresWater,books,phoneCalls,decisions,photos
  ];
}
el('lifeStatsBtn2').onclick=function(){
  if(!calcBirth||!calcPresentDate){alert("Calculate age first!");return;}
  // ==== LIFE PROGRESS/PROGRESS BAR + A DAY OF LIFE SECTION ====
  const now = calcPresentDate;
  const birth = calcBirth;
  const avgLifeSpan = AVG_LIFE_EXPECTANCY;
  let diffDays = Math.floor((now-birth)/(1000*60*60*24));
  let diffYears = (now-birth)/(1000*60*60*24*365.25);
  let progress = Math.max(0,Math.min(100, (diffYears/avgLifeSpan)*100));
  el('lifeProgressPercent').textContent = Math.floor(progress)+"%";
  el('lifeProgressDesc').textContent = `You have lived ${Math.floor(progress)}% of the average lifespan (${avgLifeSpan} yrs).`;
  // A day of life mapping
  let dayMinutes = 24*60, livedMinutes = (progress/100)*dayMinutes;
  let hr = Math.floor(livedMinutes/60), min = Math.floor(livedMinutes%60);
  let ampm = hr<12?'AM':'PM', hrdt = hr%24;
  let displayTime = `${pad(hrdt)}:${pad(min)} ${ampm}`;
  el('lifeDayDesc').textContent = `If life were a day, you are at ${displayTime}.`;
  // ==== MAIN STATS GRID ====
  const values = calculateLifeStats(birth,now);
  let gridHTML="";
  for(let i=0;i<statLabels.length;i++){
    gridHTML+=`
      <div class="stats-cell">
        <div class="stat-emoji">${emojiList[i]}</div>
        <div class="stats-label">${statLabels[i]}</div>
        <div class="stats-val">${values[i].toLocaleString()}</div>
        <div class="stats-reason">${statReasons[i]}</div>
      </div>
    `;
  }
  el('lifeStatsGrid').innerHTML=gridHTML;
  el('resultPage').style.display="none";
  el('backBtn').style.display="none";
  el('lifeStatisticsPage').style.display="block";
  el('backLifeBtn').style.display="block";
    navShow('lifeStatisticsPage');
};
// PLANETS stays the same
const planetEmoji = ["‚òøÔ∏è","‚ôÄÔ∏è","üåç","‚ôÇÔ∏è","‚ôÉ","‚ôÑ","‚ôÖ","‚ôÜ"];
const planetName = ["Mercury","Venus","Earth","Mars","Jupiter","Saturn","Uranus","Neptune"];
const planetYearLength = [0.2408467,0.61519726,1,1.8808158,11.862615,29.447498,84.016846,164.79132];
const planetReason=[
  "1 Mercury year = 0.24 Earth years",
  "1 Venus year = 0.62 Earth years",
  "Earth = what you know",
  "1 Mars year = 1.88 Earth years",
  "1 Jupiter year = 11.86 Earth years",
  "1 Saturn year = 29.45 Earth years",
  "1 Uranus year = 84.02 Earth years",
  "1 Neptune year = 164.79 Earth years"
];
el('planetBtn').onclick=function(){
  if(!calcBirth||!calcPresentDate){alert("Calculate age first!");return;}
  const ageEarth = (calcPresentDate-calcBirth)/(1000*60*60*24*365.25);
  let grid = "";
  for(let i=0;i<planetEmoji.length;i++){
    let planetAge = ageEarth/planetYearLength[i];
    grid += `
      <div class="planet-cell">
        <div class="planet-emoji">${planetEmoji[i]}</div>
        <div class="planet-label">${planetName[i]}</div>
        <div class="planet-val">${planetAge.toFixed(2)} yrs</div>
        <div class="planet-reason">${planetReason[i]}</div>
      </div>
    `;
  }
  el('planetsGrid').innerHTML = grid;
  el('resultPage').style.display="none";
  el('backBtn').style.display = "none";
  el('planetsPage').style.display="block";
  el('backPlanetBtn').style.display="block";
    navShow('planetsPage');
};
  // ==== Great Things Data (1940‚Äì2025) ====
const greatThingsData = {
  1940:["Color TV","Jeep","WWII ‚Äì Battle of Britain"],
  1941:["Radar for planes","Penicillin (mass produced)","Pearl Harbor attack"],
  1942:["First nuclear reactor","Guided missiles","Duct tape invented"],
  1943:["First digital computer (Colossus)","Scuba gear (Aqualung)","Ballpoint pen"],
  1944:["Dialysis machine","D-Day landings","Sun lamp for vitamin D"],
  1945:["Atomic bomb","Microwave oven","End of WWII"],
  1946:["ENIAC computer","Tupperware","Sunscreen lotion"],
  1947:["Transistor invented","Polaroid sunglasses","India/Pakistan independence"],
  1948:["Velcro fasteners","LP vinyl record","Electric guitar (Fender)"],
  1949:["Polaroid instant camera","NATO formed","Cake mix (ready-made)"],
  1950:["First credit card","TV remote control","Korean War starts"],
  1951:["Video tape recorder","Nuclear power station","Super glue"],
  1952:["Hydrogen bomb test","Mr. Potato Head toy","Barcode concept"],
  1953:["DNA structure found","Polio vaccine trial","Everest summit"],
  1954:["Solar cell","Commercial microwave oven","RCA color TV"],
  1955:["Polio vaccine widely used","Atomic clock","LEGO blocks"],
  1956:["First computer hard disk","Suez Crisis","Velcro shoes marketed"],
  1957:["Sputnik satellite","Nonstick frying pan","Birth control pill"],
  1958:["Integrated circuit (microchip)","Hula Hoop","NASA created"],
  1959:["Heart pacemaker","Barbie doll","Xerox copier machine"],
  1960:["Laser","First cordless tools","Birth control pill sold"],
  1961:["Yuri Gagarin‚Äîman in space","Electric toothbrush","IBM Selectric typewriter"],
  1962:["Telstar TV satellite","Audio cassette","LED light"],
  1963:["Cassette tape","Push-button phone","JFK assassination"],
  1964:["Computer mouse","LCD screen","Ford Mustang car"],
  1965:["Space walk","Compact 8-track tape","Soft contact lenses"],
  1966:["Photos of Moon surface","Pampers diapers","Mini skirt fashion"],
  1967:["ATM machine","Handheld calculator","First heart transplant"],
  1968:["Boeing 747 jet","Computer mouse demo","Apollo 8‚Äîmoon orbit"],
  1969:["Apollo 11 Moon landing","Internet (ARPANET)","Battery smoke detector"],
  1970:["Earth Day","Pocket calculator","VCR players"],
  1971:["Intel microprocessor","Email","Floppy disk"],
  1972:["CT scanner","Pong video game","Digital watch"],
  1973:["First mobile phone (prototype)","Ethernet network","Post-it notes"],
  1974:["Barcodes scanned in stores","Rubik‚Äôs Cube","Liposuction surgery"],
  1975:["First personal computer","Microsoft founded","Digital camera concept"],
  1976:["Apple company","Concorde flights","VHS tape"],
  1977:["Apple II PC","Star Wars movie","MRI scan for patients"],
  1978:["First IVF baby","GPS satellites","Rollerblades launched"],
  1979:["Sony Walkman","Snowboarding invented","Cellular network (Japan)"],
  1980:["Pac-Man game","CNN news channel","Smallpox eradicated"],
  1981:["IBM PC","Frequent flyer miles","MS-DOS"],
  1982:["CD audio player","Artificial heart implant","Diet Coke"],
  1983:["Mobile phone networks (1G)","Microsoft Word","Camcorder camera"],
  1984:["Apple Macintosh","CD-ROM","Tetris game"],
  1985:["Windows OS","DNA fingerprinting","New Coke"],
  1986:["Disposable cameras","Chernobyl disaster","Floppy disk (3.5‚Äù)"],
  1987:["Disposable contact lenses","The Simpsons debuts","Prozac"],
  1988:["Doppler weather radar","Digital hearing aid","Pan Am Flight 103 bombing"],
  1989:["World Wide Web idea","Game Boy","Berlin Wall falls"],
  1990:["Hubble Telescope","Photoshop","Mandela freed"],
  1991:["Internet for public","Linux OS","First GSM call"],
  1992:["SMS/text messaging","Smart thermostat","Super Soaker water gun"],
  1993:["First web browser (Mosaic)","Bagless vacuum","PowerBook laptop"],
  1994:["Amazon.com","PlayStation","Online video streaming"],
  1995:["Windows 95","DVD format","Yahoo search"],
  1996:["Dolly the sheep cloned","USB invented","Hotmail email"],
  1997:["Wi-Fi","Toyota Prius","Netflix founded"],
  1998:["Google search engine","iMac","Viagra launched"],
  1999:["Bluetooth","Napster","BlackBerry smartphone"],
  2000:["USB drives","Human genome draft","Camera phone"],
  2001:["iPod","Wikipedia","9/11 attacks"],
  2003:["Human genome mapped","LinkedIn","Toyota Prius mass sales"],
  2004:["Facebook","Mars rover Spirit","Podcasts"],
  2005:["YouTube","Google Maps","Xbox 360"],
  2006:["Twitter","Blu-ray disc","Pluto demoted"],
  2007:["iPhone","Kindle","Airbnb"],
  2008:["Android phones","Tesla Roadster","Bitcoin whitepaper"],
  2009:["4G network","Bitcoin live","FitBit tracker"],
  2010:["iPad","Instagram","Electric cars mainstream"],
  2011:["Siri voice assistant","Mars rover Curiosity","Snapchat"],
  2012:["CRISPR gene editing","Tesla Model S","Pinterest"],
  2013:["Xbox One","3D-printed prosthetics","Black Lives Matter"],
  2014:["Apple Watch","Amazon Alexa","Selfie stick"],
  2015:["Windows 10","Paris climate deal","Oculus VR headset"],
  2016:["Pok√©mon Go","CRISPR human trials","TikTok global"],
  2017:["Bitcoin high","Solar eclipse","Fidget spinner"],
  2018:["First gene-edited babies","GDPR law","Black Panther movie"],
  2019:["First black hole photo","Foldable phones","Greta Thunberg UN speech"],
  2020:["COVID-19 vaccines","Foldable smartphones","Zoom/WFH surge"],
  2021:["Mars Perseverance rover","mRNA vaccines","NFT boom"],
  2022:["James Webb Space Telescope","AI image generation","Electric trucks"],
  2023:["India Chandrayaan-3 Moon landing","ChatGPT mainstream","AI art boom"],
  2024:["Zero-power Bluetooth tags","Advanced AI LLMs","Flying vehicle prototypes"],
  2025:["Solid-state batteries","AI smart glasses","Mars sample mission plans"]
};

// Show Great Things for the selected year
function showGreatThings(year) {
  document.getElementById('great-things-year').textContent = year;
  const ul = document.getElementById('great-things-list');
  if (greatThingsData[year]) {
    ul.innerHTML = greatThingsData[year].map(e => `<li>${e}</li>`).join('');
  } else {
    ul.innerHTML = `<li>No data available for that year.</li>`;
  }
}

// Button logic
document.getElementById('greatThingsBtn').onclick = function(){
  if(!calcBirth){
    alert("Calculate your age first.");
    return;
  }
  showGreatThings(calcBirth.getFullYear());
  document.getElementById('resultPage').style.display = "none";
  document.getElementById('backBtn').style.display = "none";
  document.getElementById('greatThingsPage').style.display = "block";
  document.getElementById('backGreatThingsBtn').style.display = "block";
  navShow('greatThingsPage');
};

document.getElementById('backGreatThingsBtn').onclick = function(){
  history.back();
};

// Modify your navigation calls:
//  - after showResultView(), call navShow('resultPage');
//
// --- SPA/Back Button Navigation (copy-paste-ready) ---
let exitPrompted = false;

// Universal page switch (call after ANY main page change)
function navShow(pageId) {
  // Hide all "pages"
  ['inputArea','resultPage','lifeStatisticsPage','planetsPage','greatThingsPage'].forEach(id=>{
    let node = document.getElementById(id);
    if(node) node.style.display = 'none';
  });
  // Show target page
  let page = document.getElementById(pageId);
  if (page) {
    if (pageId === 'greatThingsPage') page.style.display = 'flex';
    else page.style.display = 'block';
  }
  document.getElementById('backBtn').style.display = (pageId==='resultPage') ? 'block' : 'none';
  // Only push if not coming from popstate event
  if(!navShow.__fromPop) history.pushState({pageId}, "");
  navShow.__fromPop = false;
}

// Handle the hardware/browser/app back button
window.addEventListener('popstate', function (e) {
  const pageId = (e.state && e.state.pageId) || 'inputArea';
  navShow.__fromPop = true;
  if (pageId === 'inputArea') {
    if (exitPrompted) {
      exitPrompted = false;
      history.go(-1); // Now browser/PWA/app closes
    } else {
      exitPrompted = true;
      alert('Press back again to exit');
      history.pushState({ pageId: 'inputArea' }, "");
      setTimeout(() => { exitPrompted = false; }, 1500);
    }
  } else {
    navShow(pageId);
    exitPrompted = false;
  }
});

// On FIRST LOAD, set the base state
window.addEventListener('DOMContentLoaded', ()=> {
  history.replaceState({pageId: 'inputArea'}, "");
  navShow('inputArea'); // Always land user at DOB input
});

</script>
</body>
</html>
